(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function renderMap(t){topojson.feature(t,t.objects.subunits);mapSvg.selectAll(".subunit").data(topojson.feature(t,t.objects.subunits).features).enter().append("path").attr("class",function(t){return"subunit "+t.id}).attr("d",path),mapSvg.append("path").datum(topojson.feature(t,t.objects.places)).attr("d",path).attr("class","place"),mapSvg.selectAll(".place-label").data(topojson.feature(t,t.objects.places).features).enter().append("text").attr("class","place-label").attr("transform",function(t){return"translate("+projection(t.geometry.coordinates)+")"}).attr("dy",".35em").attr("x",function(t){return t.geometry.coordinates[0]>-22?6:-6}).style("text-anchor",function(t){return t.geometry.coordinates[0]>-22?"start":"end"}).text(function(t){return t.properties.name}),mapSvg.selectAll(".subunit-label").data(topojson.feature(t,t.objects.subunits).features).enter().append("text").attr("class",function(t){return"subunit-label "+t.id}).attr("transform",function(t){return"translate("+path.centroid(t)+")"}).attr("dy",".35em").text(function(t){return t.properties.name})}function renderQuakesMap(t){var e=(buildXScale(t,WIDTH,20),buildYScale(t,HEIGHT,20),d3.scaleLinear([0,d3.max(t,function(t){return t.size})]).range([0,10]));mapSvg.selectAll("circle").data(t).enter().append("circle").attr("class","quake-location fade-in").attr("transform",function(t){return"translate("+projection([t.longitude,t.latitude])+")"}).attr("r",function(t){return e(t.size)}).attr("fill",function(t){return"rgb("+120*t.size+",0,0)"}),mapSvg.selectAll("text").data(t).enter().append("text").text(function(t){return t.size>.75?t.humanReadableLocation:null}).attr("transform",function(t){return"translate("+projection([t.longitude,t.latitude])+")"}).attr("font-family","sans-serif").attr("font-size","12px")}function getJson(t){return new Promise(function(e,n){return d3.json(t,e)})}function buildXScale(t,e,n){return d3.scaleLinear([d3.min(t,function(t){return t.longitude}),d3.max(t,function(t){return t.longitude})]).range([n,e-n])}function buildYScale(t,e,n){return d3.scaleLinear([d3.min(t,function(t){return t.latitude}),d3.max(t,function(t){return t.latitude})]).range([e-n,n])}var WIDTH=document.querySelector(".map-container").offsetWidth,HEIGHT=.7*WIDTH,SCATTER_PADDING=20;getJson("./iceland.json").then(renderMap),getJson("https://apis.is/earthquake/is").then(function(t){return t.results}).then(function(t){return t.filter(function(t){return t.size>=0})}).then(renderQuakesMap);var mapSvg=d3.select(".map-container").append("svg").attr("class","map-svg").attr("width",WIDTH).attr("height",HEIGHT),projection=d3.geoOrthographic().center([0,0]).rotate([19,-65]).scale(8e3).translate([WIDTH/2,HEIGHT/2]),path=d3.geoPath().projection(projection);

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJtYXAuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7WUNrQ0EsU0FBUyxXQUFVLEdBQ0EsU0FBUyxRQUFRLEVBQVMsRUFBUSxRQUFRLFNBRTNELFFBQU8sVUFBVSxZQUNkLEtBQUssU0FBUyxRQUFRLEVBQVMsRUFBUSxRQUFRLFVBQVUsVUFDekQsUUFBUSxPQUFPLFFBQ2YsS0FBSyxRQUFTLFNBQUEsR0FBQSxNQUFBLFdBQWdCLEVBQUUsS0FDaEMsS0FBSyxJQUFLLE1BRWIsT0FBTyxPQUFPLFFBQ1gsTUFBTSxTQUFTLFFBQVEsRUFBUyxFQUFRLFFBQVEsU0FDaEQsS0FBSyxJQUFLLE1BQ1YsS0FBSyxRQUFTLFNBSWpCLE9BQU8sVUFBVSxnQkFDZCxLQUFLLFNBQVMsUUFBUSxFQUFTLEVBQVEsUUFBUSxRQUFRLFVBQ3ZELFFBQVEsT0FBTyxRQUNmLEtBQUssUUFBUyxlQUNkLEtBQUssWUFBYSxTQUFBLEdBQUEsTUFBQSxhQUFrQixXQUFXLEVBQUUsU0FBUyxhQUF4QyxNQUNsQixLQUFLLEtBQU0sU0FDWCxLQUFLLElBQUssU0FBQSxHQUFBLE1BQUssR0FBRSxTQUFTLFlBQVksSUFBSyxHQUFNLEdBQUksSUFDckQsTUFBTSxjQUFlLFNBQUEsR0FBQSxNQUFLLEdBQUUsU0FBUyxZQUFZLElBQUssR0FBTSxRQUFVLFFBQ3RFLEtBQU0sU0FBQSxHQUFBLE1BQUssR0FBRSxXQUFXLE9BSTNCLE9BQU8sVUFBVSxrQkFDZCxLQUFLLFNBQVMsUUFBUSxFQUFTLEVBQVEsUUFBUSxVQUFVLFVBQ3pELFFBQVEsT0FBTyxRQUNmLEtBQUssUUFBUyxTQUFBLEdBQUEsTUFBQSxpQkFBc0IsRUFBRSxLQUN0QyxLQUFLLFlBQWEsU0FBQSxHQUFBLE1BQUEsYUFBa0IsS0FBSyxTQUFTLEdBQWhDLE1BQ2xCLEtBQUssS0FBTSxTQUNYLEtBQUssU0FBQSxHQUFBLE1BQUssR0FBRSxXQUFXLE9BRzVCLFFBQVMsaUJBQWdCLEdBQ3ZCLEdBRUksSUFGUyxZQUFZLEVBQVEsTUFwRVgsSUFxRVQsWUFBWSxFQUFRLE9BckVYLElBc0VULEdBQUcsYUFBYSxFQUFHLEdBQUcsSUFBSSxFQUFRLFNBQUEsR0FBQSxNQUFLLEdBQUUsU0FBUyxPQUFPLEVBQUcsS0FJekUsUUFBTyxVQUFVLFVBQ2QsS0FBSyxHQUNMLFFBQ0EsT0FBTyxVQUNQLEtBQUssUUFBUywwQkFDZCxLQUFLLFlBQWEsU0FBQSxHQUFBLE1BQUEsYUFBa0IsWUFBWSxFQUFFLFVBQVcsRUFBRSxXQUE3QyxNQUNsQixLQUFLLElBQUssU0FBQSxHQUFBLE1BQUssR0FBTyxFQUFFLFFBQ3hCLEtBQUssT0FBUSxTQUFBLEdBQUEsTUFBQSxPQUFxQixJQUFULEVBQUUsS0FBZCxVQUloQixPQUFPLFVBQVUsUUFDZCxLQUFLLEdBQ0wsUUFDQSxPQUFPLFFBQ1AsS0FBSyxTQUFBLEdBQUEsTUFBSyxHQUFFLEtBQU8sSUFBTSxFQUFFLHNCQUF3QixPQUNuRCxLQUFLLFlBQWEsU0FBQSxHQUFBLE1BQUEsYUFBa0IsWUFBWSxFQUFFLFVBQVcsRUFBRSxXQUE3QyxNQUNsQixLQUFLLGNBQWUsY0FDcEIsS0FBSyxZQUFhLFFBR3ZCLFFBQVMsU0FBUSxHQUNmLE1BQU8sSUFBSSxTQUFRLFNBQUMsRUFBUyxHQUFWLE1BQXFCLElBQUcsS0FBSyxFQUFLLEtBR3ZELFFBQVMsYUFBWSxFQUFNLEVBQU8sR0FDaEMsTUFBTyxJQUFHLGFBQ1IsR0FBRyxJQUFJLEVBQU0sU0FBQSxHQUFBLE1BQUssR0FBRSxZQUNwQixHQUFHLElBQUksRUFBTSxTQUFBLEdBQUEsTUFBSyxHQUFFLGNBRXJCLE9BQU8sRUFBUyxFQUFRLElBRzNCLFFBQVMsYUFBWSxFQUFNLEVBQVEsR0FDakMsTUFBTyxJQUFHLGFBQ1IsR0FBRyxJQUFJLEVBQU0sU0FBQSxHQUFBLE1BQUssR0FBRSxXQUNwQixHQUFHLElBQUksRUFBTSxTQUFBLEdBQUEsTUFBSyxHQUFFLGFBRXBCLE9BQU8sRUFBUyxFQUFTLElBcEg3QixHQUVNLE9BQVEsU0FBUyxjQUFjLGtCQUFrQixZQUNqRCxPQUFpQixHQUFSLE1BQ1QsZ0JBQWtCLEVBRXhCLFNBTnNCLGtCQU9uQixLQUFLLFdBRVIsUUFSbUIsaUNBU2hCLEtBQUssU0FBQSxHQUFBLE1BQVEsR0FBSyxVQUNsQixLQUFLLFNBQUEsR0FBQSxNQUFVLEdBQU8sT0FBTyxTQUFBLEdBQUEsTUFBSyxHQUFFLE1BQVEsTUFDNUMsS0FBSyxnQkFRUixJQUFNLFFBQVMsR0FBRyxPQUFPLGtCQUN0QixPQUFPLE9BQ1AsS0FBSyxRQUFTLFdBQ2QsS0FBSyxRQUFTLE9BQ2QsS0FBSyxTQUFVLFFBRVosV0FBYSxHQUFHLGtCQUNuQixRQUFRLEVBQUcsSUFDWCxRQUFRLElBQUksS0FDWixNQUFNLEtBQ04sV0FBVyxNQUFRLEVBQUcsT0FBUyxJQUU1QixLQUFPLEdBQUcsVUFBVSxXQUFXIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImNvbnN0IE1BUF9EQVRBX0ZJTEUgPSAnLi9pY2VsYW5kLmpzb24nXG5jb25zdCBRVUFLRVNfVVJMID0gJ2h0dHBzOi8vYXBpcy5pcy9lYXJ0aHF1YWtlL2lzJ1xuY29uc3QgV0lEVEggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFwLWNvbnRhaW5lcicpLm9mZnNldFdpZHRoXG5jb25zdCBIRUlHSFQgPSBXSURUSCAqIC43XG5jb25zdCBTQ0FUVEVSX1BBRERJTkcgPSAyMFxuXG5nZXRKc29uKE1BUF9EQVRBX0ZJTEUpXG4gIC50aGVuKHJlbmRlck1hcClcblxuZ2V0SnNvbihRVUFLRVNfVVJMKVxuICAudGhlbihkYXRhID0+IGRhdGEucmVzdWx0cylcbiAgLnRoZW4ocXVha2VzID0+IHF1YWtlcy5maWx0ZXIocSA9PiBxLnNpemUgPj0gMCkpXG4gIC50aGVuKHJlbmRlclF1YWtlc01hcClcblxuLypcbioqXG4qKiBNQVBQSU5HXG4qKlxuKi9cblxuY29uc3QgbWFwU3ZnID0gZDMuc2VsZWN0KCcubWFwLWNvbnRhaW5lcicpXG4gIC5hcHBlbmQoJ3N2ZycpXG4gIC5hdHRyKCdjbGFzcycsICdtYXAtc3ZnJylcbiAgLmF0dHIoJ3dpZHRoJywgV0lEVEgpXG4gIC5hdHRyKCdoZWlnaHQnLCBIRUlHSFQpXG5cbmNvbnN0IHByb2plY3Rpb24gPSBkMy5nZW9PcnRob2dyYXBoaWMoKVxuICAuY2VudGVyKFswLCAwXSlcbiAgLnJvdGF0ZShbMTksIC02NV0pXG4gIC5zY2FsZSg4MDAwKVxuICAudHJhbnNsYXRlKFtXSURUSCAvIDIsIEhFSUdIVCAvIDJdKVxuXG5jb25zdCBwYXRoID0gZDMuZ2VvUGF0aCgpLnByb2plY3Rpb24ocHJvamVjdGlvbilcblxuZnVuY3Rpb24gcmVuZGVyTWFwKGljZWxhbmQpIHtcbiAgY29uc3Qgc3VidW5pdHMgPSB0b3BvanNvbi5mZWF0dXJlKGljZWxhbmQsIGljZWxhbmQub2JqZWN0cy5zdWJ1bml0cylcblxuICBtYXBTdmcuc2VsZWN0QWxsKCcuc3VidW5pdCcpXG4gICAgLmRhdGEodG9wb2pzb24uZmVhdHVyZShpY2VsYW5kLCBpY2VsYW5kLm9iamVjdHMuc3VidW5pdHMpLmZlYXR1cmVzKVxuICAgIC5lbnRlcigpLmFwcGVuZCgncGF0aCcpXG4gICAgLmF0dHIoJ2NsYXNzJywgZCA9PiBgc3VidW5pdCAke2QuaWR9YClcbiAgICAuYXR0cignZCcsIHBhdGgpXG5cbiAgbWFwU3ZnLmFwcGVuZCgncGF0aCcpXG4gICAgLmRhdHVtKHRvcG9qc29uLmZlYXR1cmUoaWNlbGFuZCwgaWNlbGFuZC5vYmplY3RzLnBsYWNlcykpXG4gICAgLmF0dHIoJ2QnLCBwYXRoKVxuICAgIC5hdHRyKCdjbGFzcycsICdwbGFjZScpXG5cbiAgLy8gTGFyZ2UgdG93bnMgLyBjaXRpZXMgcGxhY2VuYW1lIGxhYmVsc1xuXG4gIG1hcFN2Zy5zZWxlY3RBbGwoJy5wbGFjZS1sYWJlbCcpXG4gICAgLmRhdGEodG9wb2pzb24uZmVhdHVyZShpY2VsYW5kLCBpY2VsYW5kLm9iamVjdHMucGxhY2VzKS5mZWF0dXJlcylcbiAgICAuZW50ZXIoKS5hcHBlbmQoJ3RleHQnKVxuICAgIC5hdHRyKCdjbGFzcycsICdwbGFjZS1sYWJlbCcpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsIGQgPT4gYHRyYW5zbGF0ZSgke3Byb2plY3Rpb24oZC5nZW9tZXRyeS5jb29yZGluYXRlcyl9KWApXG4gICAgLmF0dHIoJ2R5JywgJy4zNWVtJylcbiAgICAuYXR0cigneCcsIGQgPT4gZC5nZW9tZXRyeS5jb29yZGluYXRlc1swXSA+IC0yMiA/IDYgOiAtNilcbiAgICAuc3R5bGUoJ3RleHQtYW5jaG9yJywgZCA9PiBkLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdID4gLTIyID8gJ3N0YXJ0JyA6ICdlbmQnKVxuICAgIC50ZXh0KCBkID0+IGQucHJvcGVydGllcy5uYW1lIClcblxuICAvLyBJY2VsYW5kIGNvdW50cnkgdGV4dFxuXG4gIG1hcFN2Zy5zZWxlY3RBbGwoJy5zdWJ1bml0LWxhYmVsJylcbiAgICAuZGF0YSh0b3BvanNvbi5mZWF0dXJlKGljZWxhbmQsIGljZWxhbmQub2JqZWN0cy5zdWJ1bml0cykuZmVhdHVyZXMpXG4gICAgLmVudGVyKCkuYXBwZW5kKCd0ZXh0JylcbiAgICAuYXR0cignY2xhc3MnLCBkID0+IGBzdWJ1bml0LWxhYmVsICR7ZC5pZH1gKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBkID0+IGB0cmFuc2xhdGUoJHtwYXRoLmNlbnRyb2lkKGQpfSlgKVxuICAgIC5hdHRyKCdkeScsICcuMzVlbScpXG4gICAgLnRleHQoZCA9PiBkLnByb3BlcnRpZXMubmFtZSlcbn1cblxuZnVuY3Rpb24gcmVuZGVyUXVha2VzTWFwKHF1YWtlcyl7XG4gIGxldCB4U2NhbGUgPSBidWlsZFhTY2FsZShxdWFrZXMsIFdJRFRILCBTQ0FUVEVSX1BBRERJTkcpXG4gIGxldCB5U2NhbGUgPSBidWlsZFlTY2FsZShxdWFrZXMsIEhFSUdIVCwgU0NBVFRFUl9QQURESU5HKVxuICBsZXQgclNjYWxlID0gZDMuc2NhbGVMaW5lYXIoWzAsIGQzLm1heChxdWFrZXMsIGQgPT4gZC5zaXplICldKS5yYW5nZShbMCwgMTBdKVxuXG4gIC8vIHF1YWtlIGNpcmNsZXNcblxuICBtYXBTdmcuc2VsZWN0QWxsKCdjaXJjbGUnKVxuICAgIC5kYXRhKHF1YWtlcylcbiAgICAuZW50ZXIoKVxuICAgIC5hcHBlbmQoJ2NpcmNsZScpXG4gICAgLmF0dHIoJ2NsYXNzJywgJ3F1YWtlLWxvY2F0aW9uIGZhZGUtaW4nKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBkID0+IGB0cmFuc2xhdGUoJHtwcm9qZWN0aW9uKFtkLmxvbmdpdHVkZSwgZC5sYXRpdHVkZV0pfSlgKVxuICAgIC5hdHRyKCdyJywgZCA9PiByU2NhbGUoZC5zaXplKSApXG4gICAgLmF0dHIoJ2ZpbGwnLCBkID0+IGByZ2IoJHtkLnNpemUgKiAxMjB9LDAsMClgIClcblxuICAgIC8vIHF1YWtlIGRldGFpbHNcblxuICBtYXBTdmcuc2VsZWN0QWxsKCd0ZXh0JylcbiAgICAuZGF0YShxdWFrZXMpXG4gICAgLmVudGVyKClcbiAgICAuYXBwZW5kKCd0ZXh0JylcbiAgICAudGV4dChkID0+IGQuc2l6ZSA+IC43NSA/IGQuaHVtYW5SZWFkYWJsZUxvY2F0aW9uIDogbnVsbClcbiAgICAuYXR0cigndHJhbnNmb3JtJywgZCA9PiBgdHJhbnNsYXRlKCR7cHJvamVjdGlvbihbZC5sb25naXR1ZGUsIGQubGF0aXR1ZGVdKX0pYClcbiAgICAuYXR0cignZm9udC1mYW1pbHknLCAnc2Fucy1zZXJpZicpXG4gICAgLmF0dHIoJ2ZvbnQtc2l6ZScsICcxMnB4Jylcbn1cblxuZnVuY3Rpb24gZ2V0SnNvbih1cmwpe1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gZDMuanNvbih1cmwsIHJlc29sdmUpKVxufVxuXG5mdW5jdGlvbiBidWlsZFhTY2FsZShkYXRhLCB3aWR0aCwgcGFkZGluZykge1xuICByZXR1cm4gZDMuc2NhbGVMaW5lYXIoW1xuICAgIGQzLm1pbihkYXRhLCBkID0+IGQubG9uZ2l0dWRlICksXG4gICAgZDMubWF4KGRhdGEsIGQgPT4gZC5sb25naXR1ZGUgKVxuICBdKVxuICAucmFuZ2UoW3BhZGRpbmcsIHdpZHRoIC0gcGFkZGluZ10pXG59XG5cbmZ1bmN0aW9uIGJ1aWxkWVNjYWxlKGRhdGEsIGhlaWdodCwgcGFkZGluZykge1xuICByZXR1cm4gZDMuc2NhbGVMaW5lYXIoW1xuICAgIGQzLm1pbihkYXRhLCBkID0+IGQubGF0aXR1ZGUgKSxcbiAgICBkMy5tYXgoZGF0YSwgZCA9PiBkLmxhdGl0dWRlIClcbiAgXSlcbiAgIC5yYW5nZShbaGVpZ2h0IC0gcGFkZGluZywgcGFkZGluZ10pXG59XG4iXX0=
